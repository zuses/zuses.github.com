<!DOCTYPE html>
<!--[if IE 6]><html class="ielt7 ielt8 ielt9 ielt10"><![endif]-->
<!--[if IE 7]><html class="ie7 ielt8 ielt9 ielt10"><![endif]-->
<!--[if IE 8]><html class="ie8 ielt9 ielt10"><![endif]-->
<!--[if IE 9]><html class="ie9 ielt10"><![endif]-->
<!--[if (gt IE 9)|!IE]><!--><html lang="en" class="en"><![endif]-->
<head>
  <meta charset="UTF-8">
  <title>Ryze的博客</title>
  <link rel="stylesheet" href="css/global.css">
  <link rel="stylesheet/less" type="text/css" href="css/index.less" />
  <link rel="stylesheet" href="css/index.css">
  <script src="js/jquery-1.11.3.min.js"></script>
  <script src="js/global.js"></script>
  <!--[if lt IE 9]>
	<script src="js/html5shiv.min.js"></script>
	<script src="js/respond.min.js"></script>
  <![endif]-->
</head>
<body>
  <div class="global_wrap">
    <div class="global_nav mid clear">
      <div class="nav_logo">
        <a class="logo" href="javascript:;"></a>
      </div>
      <div class="nav_list">
        <ul class="clear">
          <li><a href="javascript:;">首页</a></li>
          <li><a href="javascript:;">首页</a></li>
          <li><a href="javascript:;">首页</a></li>
        </ul>
      </div>
    </div>
    <div class="container">
      <form action="" method="get">
        <input type="text" id="code" onchange="callServer();">
      </form>
    </div>
  </div>
</body>
<script>
  var xmlHttp = globalMethod.getXmlhttp();
  function callServer() {
  // Get the city and state from the web form
  var code = document.getElementById("code").value;
  // Only go on if there are values for both fields
  if ((code == null) || (code == "")) return;

  // Build the URL to connect to
  var url = 'ajaxfile/ajaxfile1.txt' + '?code=' + Math.round(Math.random()*5 + 1);
  console.log(url)
  // Open a connection to the server
  xmlHttp.open("GET", url, true);

  // Setup a function for the server to run when it's done
  xmlHttp.onreadystatechange = updatePage;

  // Send the request
  xmlHttp.send(null);
}
  function updatePage(){
    if (xmlHttp.readyState == 4) {
      if (xmlHttp.status == 200) {
        var response = xmlHttp.responseText;
        document.getElementById('code').value = response;
      }else if (xmlHttp.status == 404)
         alert("Request URL does not exist");
       else
         alert("Error: status code is " + xmlHttp.status);
    };
  }
</script>
</html>